<Page
    x:Class="Lip.GUI.Lite.Views.Pages.DashboardPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:lip="clr-namespace:Lip.Core;assembly=Lip.Core"
    xmlns:local="clr-namespace:Lip.GUI.Lite.Views.Pages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    xmlns:vm="clr-namespace:Lip.GUI.Lite.ViewModels.Pages"
    Title="DashboardPage"
    d:DataContext="{d:DesignInstance local:DashboardPage,
                                     IsDesignTimeCreatable=False}"
    d:DesignHeight="450"
    d:DesignWidth="800"
    ui:Design.Background="{DynamicResource ApplicationBackgroundBrush}"
    ui:Design.Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    ScrollViewer.CanContentScroll="False"
    mc:Ignorable="d">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <Grid Grid.Column="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <ui:ListView
                Grid.Row="0"
                ItemsSource="{Binding ViewModel.Packs}"
                ScrollViewer.CanContentScroll="False"
                ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                ScrollViewer.VerticalScrollBarVisibility="Hidden"
                SelectedItem="{Binding ViewModel.SelectedPack, Mode=TwoWay}">
                <ui:ListView.ItemTemplate>
                    <DataTemplate DataType="{x:Type vm:DashboardViewModel+Package}">
                        <!--  I don't know why it has an error, every thing work right  -->
                        <StackPanel Margin="10">
                            <Grid Margin="0,4,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <ui:TextBlock
                                    Grid.Column="0"
                                    Margin="0,0,0,4"
                                    FontTypography="BodyStrong"
                                    Text="{Binding Manifest.Info.Name}"
                                    TextTrimming="WordEllipsis" />
                                <ui:Badge
                                    Grid.Column="1"
                                    Margin="12,0,0,0"
                                    VerticalAlignment="Center">
                                    <Grid>
                                        <ui:TextBlock FontTypography="Body" Text="{Binding Manifest.Version}" />
                                        <ui:TextBlock
                                            Margin="8,0,0,0"
                                            FontTypography="Body"
                                            Text="{Binding Variant.Label}" />
                                    </Grid>
                                </ui:Badge>
                            </Grid>
                            <ui:TextBlock
                                VerticalAlignment="Center"
                                Text="{Binding Manifest.Info.Description}"
                                TextWrapping="Wrap" />
                        </StackPanel>
                    </DataTemplate>
                </ui:ListView.ItemTemplate>
            </ui:ListView>
            <ui:Card
                Grid.Row="1"
                Margin="4,0,4,12"
                VerticalAlignment="Stretch">
                <StackPanel>
                    <TextBlock Margin="0,0,0,12" Text="install Package" />
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBox Grid.Column="0" />
                        <ui:Button
                            Grid.Column="1"
                            Margin="8,0,0,0"
                            Content="Install" />
                    </Grid>
                </StackPanel>
            </ui:Card>
        </Grid>
        <ui:Card
            Grid.Column="1"
            Margin="4,0,-20,12"
            VerticalAlignment="Stretch">
            <StackPanel VerticalAlignment="Top">
                <TextBlock
                    FontSize="16"
                    FontWeight="Bold"
                    Text="{Binding ViewModel.SelectedPack.Manifest.Info.Name, FallbackValue=''}" />
                <TextBlock Margin="0,8,0,0" Text="{Binding ViewModel.SelectedPack.Manifest.Info.Description}" />
                <TextBlock Margin="0,8,0,0" Text="{Binding ViewModel.SelectedPack.Manifest.Version}" />
                <TextBlock Margin="0,8,0,0" Text="{Binding ViewModel.SelectedPack.Variant.Label}" />
            </StackPanel>
        </ui:Card>
    </Grid>
</Page>
